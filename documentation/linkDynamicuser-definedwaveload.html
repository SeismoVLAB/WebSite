<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.13"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>Seismo-VLAB: Dynamic user-defined wave load</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
		<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="Style.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><img alt="Logo" src="Logo.png"/></td>
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">Seismo-VLAB
								&#160;<span id="projectnumber">1.3</span>
							</div>
							<div id="projectbrief">An Open-Source Finite Element Software for Meso-Scale Simulations</div>
						</td>
						<td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('linkDynamicuser-definedwaveload.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Dynamic user-defined wave load </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Background</h1>
<p>The domain reduction method (DRM) is a modular two-step finite element methodology for transmitting ground motion in heterogeneous media. In this method, the model is first divided into an auxiliary problem that simulates the source and propagation without the localized features. The outputs of such problem are then used in order to derive effective forces and then applied to a second model which now contains the localized features.</p>
<div class="image">
<img src="DRM_Domain.png" alt="DRM_Domain.png" width="35%"/>
</div>
<p>In the figure the seismic region with two neighboring surfaces \(\Gamma_\textrm{NS}\) and \(\Gamma_\textrm{e}\) on which effective nodal forces \(P_\textrm{eff}\) defined as</p>
<p class="formulaDsp">
\[ P_{\textrm{eff}} = \begin{bmatrix} P_\textrm{i}^\textrm{R} \\ P_\textrm{b}^\textrm{R} \\ P_\textrm{e}^\textrm{R} \end{bmatrix} = \begin{bmatrix} 0 \\ -\mathbf{M}_{be}^{\Omega_\textrm{F}} \, \ddot{u}_\textrm{e}^\textrm{B} - \mathbf{C}_{be}^{\Omega_\textrm{F}} \, \dot{u}_\textrm{e}^\textrm{B} - \mathbf{K}_{be}^{\Omega_\textrm{F}} \, u_\textrm{e}^\textrm{B} \\ \mathbf{M}_{eb}^{\Omega_\textrm{F}} \, \ddot{u}_\textrm{b}^\textrm{B} + \mathbf{C}_{eb}^{\Omega_\textrm{F}} \, \dot{u}_\textrm{b}^\textrm{B} + \mathbf{K}_{eb}^{\Omega_\textrm{F}} \, u_\textrm{b}^\textrm{B} \end{bmatrix} \, , \]
</p>
<p>are to be applied. These forces are equivalent to and replace the original seismic forces \(P_\textrm{e}^R\) , which act in the vicinity of the causative fault. The DRM is achieved in <b>SVL</b> by defining either <b>PLANE WAVE LOAD</b> or <b>GENERAL WAVE LOAD</b>, the forces \(P_\textrm{i}^\textrm{R}\), \(P_\textrm{b}^\textrm{R}\), and \(P_\textrm{e}^\textrm{R}\) are computed internally, provided with the fields \(u_\textrm{e}^\textrm{B}\), \(\dot{u}_\textrm{b}^\textrm{B}\), and \(\ddot{u}_\textrm{b}^\textrm{B}\).</p>
<p><b>REFERENCE:</b></p><ul>
<li>Jacobo Bielak, Kostas Loukakis, Yoshiaki Hisada, and Chiaki Yoshimura. "Domain reduction method for three-dimensional earthquake modeling in localized regions, part I: theory". Bulletin of the Seismological Society of America, 93:817â€“824, 2003.</li>
</ul>
<h1>Pre-Analysis</h1>
<p>The python <a class="el" href="linkSoftwareStructure.html#linkPreProcess">Pre-Analysis</a> in the <span style="color:green"><b>01-Pre_Process/Method/Attach.py</b></span> file provides with an interface to create a <b>GENERAL WAVE LOAD</b>. This function can be used to create any type of wave field. For example, to create a <a class="el" href="linkDynamicuser-definedwaveload.html">Dynamic user-defined wave load</a> using json format, use:</p>
<ul>
<li><p class="startli"><span style="color:blue"><b>addLoad</b></span>(<b>tag</b>, <b>name</b>, <b>attributes</b>):</p><ul>
<li><span style="color:green"><b>tag</b></span> : The identifier of this load, i.e., tag &gt; -1</li>
<li><span style="color:green"><b>name</b></span> : The Seismo-VLAB load class name, in this case '<b>ElementLoad</b>'.</li>
<li><span style="color:green"><b>attributes</b></span> : Specific properties for the created load.<ul>
<li><span style="color:blue">'fun'</span> : The function identifier</li>
<li><span style="color:blue">'list'</span> : The identifier of the elements (DRM) where this load acts upon</li>
<li><span style="color:blue">'type'</span> : The type of element load, in this case '<b>GeneralWave</b>'.</li>
</ul>
</li>
</ul>
<p class="startli">The files name must be provided as <code>name.$.ext</code>, where <code>$</code> represents the <a class="el" href="classNode.html" title="Class for creating a node in space that handles coordinates, state variables, free and total degrees-...">Node</a> identifier, and <code>ext</code> the extension of the file. This file contains on the header 3 numbers: <code>nt</code> number of time steps, <code>nc</code> the number of time history columns (in 2D = 6, in 3D = 9), a boolean number (<code>0</code> or <code>1</code>) to denote the node is interior or exterior respectively. Then, the time series values follow, for 2D is arranged as \((u_x,u_y,v_x,v_y,a_x,a_y)\), and for 3D is arranged as \((u_x, u_y, u_z,v_x,v_y,v_z, a_x,a_y,a_z)\). See Figure below for more details.</p>
<div class="image">
<img src="GeneralWave.png" alt="GeneralWave.png" width="60%"/>
</div>
<p class="startli"><b>Example</b> </p><blockquote class="doxtable">
<p>A <b>GENERAL WAVE LOAD</b> can be defined using the python interface as follows:<br />
SVL.addLoad(tag=1, name='ElementLoad', attributes={'fun': 1, 'type': 'GeneralWave', 'list': [1,2,3,4,5]}) </p>
</blockquote>
<p class="startli"><b>Application</b><br />
 Please refer to the <b>A02-DY_Lin_2DGeneralHorizontalPlaneWaveDRM_ElasticPStrain_Quad4.py</b> file located at <span style="color:green"><b>03-Validations/02-Performance/</b></span> to see an example on how a <b>GENERAL WAVE LOAD</b> and its <b>DYNAMIC FUNCTION</b> (and structure of the input file) are defined.</p>
</li>
</ul>
<p>The python <a class="el" href="linkSoftwareStructure.html#linkPreProcess">Pre-Analysis</a> in the <span style="color:green"><b>01-Pre_Process/Method/Attach.py</b></span> file also provide an interface to create a <b>PLANE WAVE LOAD</b> for homogeneous half-space. In this particular case, the <b>PLANE WAVE LOAD</b> options is designed to compute the domain reduction fields (linear elastic half-space) for a planar wave provided with a time series. This can be done using json format, use:</p><ul>
<li><p class="startli"><span style="color:blue"><b>addLoad</b></span>(<b>tag</b>, <b>name</b>, <b>attributes</b>):</p><ul>
<li><span style="color:green"><b>tag</b></span> : The identifier of this load, i.e., tag &gt; -1</li>
<li><span style="color:green"><b>name</b></span> : The Seismo-VLAB load class name, in this case '<b>ElementLoad</b>'</li>
<li><span style="color:green"><b>attributes</b></span> : Specific properties for the created load, for example<ul>
<li><span style="color:blue">'fun'</span> The function identifier</li>
<li><span style="color:blue">'list'</span> The identifier of the elements (DRM) where this load acts upon</li>
<li><span style="color:blue">'type'</span> The type of element load, in this case '<b>PlaneWave</b>'.</li>
</ul>
</li>
</ul>
<p class="startli">The structure of the input file, required to be specified in function with identifier <b>attributes</b>[<span style="color:blue">'fun'</span>], is as follows: </p><div class="image">
<img src="PlaneWave.png" alt="PlaneWave.png" width="35%"/>
</div>
<p class="startli"><b>Example</b> </p><blockquote class="doxtable">
<p>A <b>PLANE WAVE LOAD</b> can be defined using the python interface as follows:<br />
SVL.addLoad(tag=1, name='ElementLoad', attributes={'fun': 1, 'type': 'PlaneWave', 'list': [1,2,3,4,5]}) </p>
</blockquote>
<p class="startli"><b>Application</b><br />
 Please refer to the <b>B01-DY_Lin_2D_Incline_DRM_Fixed_Boundary_Elastic_Tria3.py</b> file located at <span style="color:green"><b>03-Validations/02-Performance/</b></span> to see an example on how a <b>PLANE WAVE LOAD</b> and its <b>DYNAMIC FUNCTION</b> are defined.</p>
</li>
</ul>
<p>Please refer to <span style="color:green"><b>SVL/01-Pre_Process/Core/PlaneWave.py</b></span> for more details in declarations and implementation aspects.</p>
<p>On the contrary, the <span style="color:green"><b>01-Pre_Process/Method/Remove.py</b></span> file provides with an interface to depopulate the <code>Entities</code> dictionary. For example, to remove an already define <a class="el" href="classLoad.html" title="Class for creating a load that can be applied to a node or to a element. ">Load</a>, use:</p><ul>
<li><span style="color:blue"><b>delLoad</b></span>(<b>tag</b>):<ul>
<li><span style="color:green"><b>tag</b></span> : The identifier of the load to be removed, i.e., tag &gt; -1</li>
</ul>
</li>
</ul>
<p>Now, to remove a already defined function, use:</p><ul>
<li><span style="color:blue"><b>delFunction</b></span>(<b>tag</b>):<ul>
<li><span style="color:green"><b>tag</b></span> : The identifier of the function to be removed, i.e., tag &gt; -1</li>
</ul>
</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>The <b>PLANE WAVE LOAD</b> is generated internally in the <b>Pre-Analysis</b> using the following functions: <br />
<ul>
<li><span style="color:blue"><b>GenerateDRMFiles</b></span>():<br />
 This function writes (generates) the DRM input files to be used in the <b>Run-Analysis</b>. The function writes the input information regarding displacement, velocity and acceleration at each DRM node. <br />
</li>
<li><span style="color:blue"><b>WriteDRMFile</b></span>():<br />
 This function writes the nodal DRM information to a *.drm file. The structure of the generated file (for a 2D case) is as follows: <div class="image">
<img src="GeneralWave.png" alt="GeneralWave.png" width="55%"/>
</div>
 <br />
</li>
<li><span style="color:blue"><b>ParseDRMFile</b></span>():<br />
 This function parses the DRM file for plane-wave provided in the <b>SVL.Entities['Functions']</b>. The routine reads the displacement, velocity, or accelertion input signal depending on the option = <b>ALL</b>,<b>DISP</b>,<b>VEL</b>,<b>ACCEL</b> provided (at the header) by the user. The structure of the generated file is as follows: <div class="image">
<img src="PlaneWave.png" alt="PlaneWave.png" width="35%"/>
</div>
 <br />
In addition, there are several functions that are defined to handle different wave patterns: <br />
</li>
<li><span style="color:blue"><b>RHbackground2Dfield</b></span>():<br />
 This function generates the 2D DRM field for a Rayleigh wave in a homogeneous half-space at a particular node. This file has the implementation on how the Rayleigh wave displacements, velocities, and acceleration fields are computed. <br />
</li>
<li><span style="color:blue"><b>RHbackground3Dfield</b></span>():<br />
 This function generates the 3D DRM field for a Rayleigh wave in a homogeneous half-space at a particular node. This file has the implementation on how the Rayleigh wave displacements, velocities, and acceleration fields are computed. <br />
</li>
<li><span style="color:blue"><b>SVbackground2Dfield</b></span>():<br />
 This function generates the 2D DRM field for a shear wave (<b>SV</b>) in a homogeneous layered half-space at a particular node. This file has the implementation on how the shear wave displacements, velocities, and acceleration fields are computed. <br />
</li>
<li><span style="color:blue"><b>SVbackground3Dfield</b></span>():<br />
 This function generates the 3D DRM field for a shear wave (<b>SV</b>) in a homogeneous layered half-space at a particular node. This file has the implementation on how the shear wave displacements, velocities, and acceleration fields are computed. <br />
</li>
<li><span style="color:blue"><b>SHbackground3Dfield</b></span>():<br />
 This function generates the 3D DRM field for a shear wave (<b>SH</b>) in a homogeneous layered half-space at a particular node. This file has the implementation on how the shear wave displacements, velocities, and acceleration fields are computed.</li>
</ul>
</dd></dl>
<h1>Run-Analysis</h1>
<p>The C++ <a class="el" href="linkSoftwareStructure.html#linkRunProcess">Run-Analysis</a> in the <span style="color:green"><b>02-Run_Process/05-Loads/Load.cpp</b></span> file provides the class implementation. A <b>STATIC/DYNAMIC SUPPORT MOTION LOAD</b> is defined inside the <span style="color:black"><b>"Loads"</b></span> json field indicating its <span style="color:blue"><b>"Tag"</b></span> as follows,</p><ul>
<li><pre style="padding: 0px; color: black; background-color: white; border: white 0px solid">
{
    <span style="color:black"><b>"Loads"</b></span>: {
        <span style="color:blue"><b>"Tag"</b></span>: {
            <span style="color:green"><b>"name"</b></span> : "ELEMENTLOAD",
            <span style="color:green"><b>"attributes"</b></span>: {
                <span style="color:maroon"><b>"name"</b></span>: "TIMESERIE",
                <span style="color:maroon"><b>"type"</b></span>: "GENERALWAVE",
                <span style="color:maroon"><b>"file"</b></span>: str,
                <span style="color:maroon"><b>"list"</b></span>: [ ]
            }
        }
    }
}
</pre> <table class="doxtable">
<tr>
<th>Variable </th><th>Description  </th></tr>
<tr>
<td><code>Tag</code> </td><td>Unique load object identifier. </td></tr>
<tr>
<td><code>file</code> </td><td>Represents the full path where the DRM files are located. </td></tr>
<tr>
<td><code>list</code> </td><td>List of <a class="el" href="classElement.html" title="Virtual class for creating an element in a mesh. ">Element</a> identifiers where the general wave pattern is applied. </td></tr>
</table>
<br />
<dl class="section attention"><dt>Attention</dt><dd>The <code>file</code> path must contain a generic name, for example "DRMForces$.txt", so that the keyword "$" can be replaced by the <a class="el" href="classNode.html" title="Class for creating a node in space that handles coordinates, state variables, free and total degrees-...">Node</a> identifier. </dd>
<dd>
The <b>PLANE WAVE LOAD</b> is treated as a <b>GENERAL WAVE LOAD</b>, since the <a class="el" href="linkSoftwareStructure.html#linkPreProcess">Pre-Analysis</a> creates all the files required for this purpose.</dd></dl>
<b>Example</b> <blockquote class="doxtable">
<p>A 3D <b>GENERAL WAVE LOAD</b> applied on elements 1, 11, 16, 21, 26 whose files are loaded at DRM/DRMForces$.txt: <br />
{ "Loads": { "1": { "name" : "ELEMENTLOAD", "attributes": { "name": "TIMESERIE", "type": "GENERALWAVE", "file": "/full/path/to/folder/DRM/DRMForces$.txt", "list": [1,6,16,21,26] } } } } </p>
</blockquote>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Fri May 28 2021 10:43:26 for Seismo-VLAB by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13.
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
